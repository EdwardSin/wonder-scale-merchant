<h4 class="ws-title">Social Media</h4>
<div class="w-100">
    <div class="mb-3">
        <div class="ws-input mb-3">
            <mat-select [disabled]="isMediaMax" class="form-control nooutline" [(ngModel)]="selectedMedia"
                (change)="mediaChange()" placeholder="Select Social Media">
                <mat-option [value]="'facebook'">Facebook</mat-option>
                <mat-option [value]="'twitter'">Twitter</mat-option>
                <mat-option [value]="'whatsapp'">Whatsapp</mat-option>
                <mat-option [value]="'instagram'">Instagram</mat-option>
                <mat-option [value]="'wechat'">Wechat</mat-option>
                <mat-option [value]="'weibo'">Weibo</mat-option>
            </mat-select>
        </div>
        <div class="mb-3" [ngSwitch]="selectedMedia">
            <div class="input-group font-8" style="width: fit-content" *ngSwitchCase="'facebook'">
                <span style="line-height:31px;">
                    https://www.facebook.com/
                </span>
                <input name="fbmedia" class="form-control form-control-sm nooutline p-1" placeholder="Account"
                    (keydown.enter)="addMedia('facebook', fbmedia)" (input)="error = ''" [(ngModel)]="fbmedia" />
                <div class="input-group-append">
                    <button class="input-group-text nooutline pl-2 pr-2 p-0" (click)="addMedia('facebook', fbmedia)">
                        <span class="fas fa-plus"></span>
                    </button>
                </div>
            </div>

            <div class="input-group font-8" style="width: fit-content" *ngSwitchCase="'twitter'">
                <span style="line-height:31px;">
                    https://www.twitter.com/
                </span>
                <input name="twittermedia" class="form-control form-control-sm nooutline p-1" placeholder="Account"
                    (keydown.enter)="addMedia('twitter', twittermedia)" (input)="error = ''"
                    [(ngModel)]="twittermedia" />
                <div class="input-group-append">
                    <button class="input-group-text nooutline pl-2 pr-2 p-0"
                        (click)="addMedia('twitter', twittermedia)">
                        <span class="fas fa-plus"></span>
                    </button>
                </div>
            </div>
            <div class="input-group font-8" style="width: fit-content" *ngSwitchCase="'whatsapp'">
                <input name="whatsappmedia" class="form-control form-control-sm nooutline p-1"
                    placeholder="Phone Number" (keydown.enter)="addMedia('whatsapp', whatsappmedia)"
                    (input)="error = ''" [(ngModel)]="whatsappmedia" />
                <div class="input-group-append">
                    <button class="input-group-text nooutline pl-2 pr-2 p-0"
                        (click)="addMedia('whatsapp', whatsappmedia)">
                        <span class="fas fa-plus"></span>
                    </button>
                </div>
            </div>
            <div class="input-group font-8" style="width: fit-content" *ngSwitchCase="'instagram'">
                <span style="line-height:31px;">
                    https://www.instagram.com/
                </span>
                <input name="instagrammedia" class="form-control form-control-sm nooutline p-1" placeholder="Account"
                    (keydown.enter)="addMedia('instagram', instagrammedia)" (input)="error = ''"
                    [(ngModel)]="instagrammedia" />
                <div class="input-group-append">
                    <button class="input-group-text nooutline pl-2 pr-2 p-0"
                        (click)="addMedia('instagram', instagrammedia)">
                        <span class="fas fa-plus"></span>
                    </button>
                </div>
            </div>
            <div class="input-group font-8" style="width: fit-content" *ngSwitchCase="'wechat'">
                <input name="wechatmedia" class="form-control form-control-sm nooutline p-1"
                    placeholder="Wechat Account" (keydown.enter)="addMedia('wechat', wechatmedia)" (input)="error = ''"
                    [(ngModel)]="wechatmedia" />
                <div class="input-group-append">
                    <button class="input-group-text nooutline pl-2 pr-2 p-0" (click)="addMedia('wechat', wechatmedia)">
                        <span class="fas fa-plus"></span>
                    </button>
                </div>
            </div>
            <div class="input-group font-8" style="width: fit-content" *ngSwitchCase="'weibo'">
                <input name="weibomedia" class="form-control form-control-sm nooutline p-1" placeholder="Weibo Account"
                    (keydown.enter)="addMedia('weibo', weibomedia)" (input)="error = ''" [(ngModel)]="weibomedia" />
                <div class="input-group-append">
                    <button class="input-group-text nooutline pl-2 pr-2 p-0" (click)="addMedia('weibo', weibomedia)">
                        <span class="fas fa-plus"></span>
                    </button>
                </div>
            </div>
            <p *ngIf="error != ''" class="text-danger mb-0 font-8">{{error}}</p>
        </div>
    </div>
    <div *ngIf="shop?.media?.length; else loadingTemplate">
        <div class="w-100" *ngFor="let media of shop?.media; let i = index">
            <div [ngSwitch]="media?.mediaType" style="background-color: #f5f5f5; border-radius: 5px;"
                class="mb-3 pl-4 pr-4 pt-3 pb-3">
                <div *ngSwitchCase="'facebook'">
                    <div class="w-100 row no-gutters">
                        <label id="fb" class="ws-icon d-inline-block"></label>
                        <p *ngIf="!isEditMedia('facebook'+ i )"
                            class="ws-media-list text-muted pl-2 m-0 font-9 clickable">
                            <a href="https://www.facebook.com/{{media?.value}}" class="default"
                                target="_blank">https://www.facebook.com/{{media?.value}}</a>
                            <span (click)="$event.stopPropagation(); removeMedia('facebook', media?.value)"
                                class="fas fa-times"></span>
                            <span (click)="$event.stopPropagation(); setEditMedia('facebook' + i)"
                                class="fas fa-edit"></span>
                        </p>
                        <form #frm="ngForm" class="input-group fit-width" *ngIf="isEditMedia('facebook' + i)">
                            <span class="font-9 pl-2 text-muted"
                                style="line-height:31px">https://www.facebook.com/</span>
                            <input (clickOutside)="setEditMedia('')" id="facebook{{i}}input" name="facebook" type='text'
                                class="col form-control form-control-sm no-outline" autocomplete="off" placeholder="URL"
                                [ngModel]="media?.value" />
                            <div class="input-group-append">
                                <button (click)="editMedia('facebook', frm, i)"
                                    class="input-group-text pl-2 pr-2 nooutline">
                                    <span class="fa fa-check"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div *ngSwitchCase="'twitter'">
                    <div class="w-100 row no-gutters">
                        <label id="twitter" class="ws-icon mr-3 d-inline-block"></label>
                        <p *ngIf="!isEditMedia('twitter'+ i )"
                            class="ws-media-list text-muted pl-2 m-0 font-9 clickable">
                            <a href="https://www.twitter.com/{{media?.value}}" class="default"
                                target="_blank">https://www.twitter.com/{{media?.value}}</a>
                            <span (click)="$event.stopPropagation(); removeMedia('twitter', media?.value)"
                                class="fas fa-times"></span>
                            <span (click)="$event.stopPropagation(); setEditMedia('twitter' + i)"
                                class="fas fa-edit"></span>
                        </p>
                        <form #frm="ngForm" class="input-group fit-width" *ngIf="isEditMedia('twitter' + i)">
                            <span class="font-9 pl-2 text-muted"
                                style="line-height:31px">https://www.twitter.com/</span>
                            <input (clickOutside)="setEditMedia('')" id="twitter{{i}}input" name="twitter" type='text'
                                class="pl-2 col form-control form-control-sm no-outline" autocomplete="off"
                                placeholder="URL" [ngModel]="media?.value" />
                            <div class="input-group-append">
                                <button (click)="editMedia('twitter', frm, i)"
                                    class="input-group-text pl-2 pr-2 nooutline">
                                    <span class="fa fa-check"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div *ngSwitchCase="'instagram'">
                    <div class="w-100 row no-gutters">
                        <label id="instagram" class="ws-icon mr-3 d-inline-block"></label>
                        <p *ngIf="!isEditMedia('instagram'+ i )"
                            class="ws-media-list text-muted pl-2 m-0 font-9 clickable">
                            <a href="https://www.instagram.com/{{media?.value}}" class="default"
                                target="_blank">https://www.instagram.com/{{media?.value}}</a>
                            <span (click)="$event.stopPropagation(); removeMedia('instagram', media?.value)"
                                class="fas fa-times"></span>
                            <span (click)="$event.stopPropagation(); setEditMedia('instagram' + i)"
                                class="fas fa-edit"></span>
                        </p>
                        <form #frm="ngForm" class="input-group fit-width" *ngIf="isEditMedia('instagram' + i)">
                            <span class="font-9 pl-2 text-muted"
                                style="line-height:31px">https://www.instagram.com/</span>
                            <input (clickOutside)="setEditMedia('')" id="instagram{{i}}input" name="instagram"
                                type='text' class="pl-2 col form-control form-control-sm no-outline" autocomplete="off"
                                placeholder="URL" [ngModel]="media?.value" />
                            <div class="input-group-append">
                                <button (click)="editMedia('instagram', frm, i)"
                                    class="input-group-text pl-2 pr-2 nooutline">
                                    <span class="fa fa-check"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div *ngSwitchCase="'whatsapp'">
                    <div class="w-100 row no-gutters">
                        <label id="whatsapp" class="ws-icon mr-3 d-inline-block"></label>
                        <p *ngIf="!isEditMedia('whatsapp'+ i )" class="ws-media-list col pl-2 m-0 font-9">
                            {{media?.value}}
                            <span (click)="$event.stopPropagation();removeMedia('whatsapp', media?.value)"
                                class="fas fa-times"></span>
                            <span (click)="$event.stopPropagation();setEditMedia('whatsapp' + i)"
                                class="fas fa-edit"></span>
                        </p>
                        <form #frm="ngForm" class="input-group fit-width" *ngIf="isEditMedia('whatsapp' + i)">
                            <input (clickOutside)="setEditMedia('')" id="whatsapp{{i}}input" name="whatsapp" type='text'
                                class="pl-2 col form-control form-control-sm no-outline" autocomplete="off"
                                placeholder="URL" [ngModel]="media?.value" />
                            <div class="input-group-append">
                                <button (click)="editMedia('whatsapp', frm, i)"
                                    class="input-group-text pl-2 pr-2 nooutline">
                                    <span class="fa fa-check"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div *ngSwitchCase="'wechat'">
                    <div class="w-100 row no-gutters">
                        <label id="wechat" class="ws-icon mr-3 d-inline-block"></label>
                        <p *ngIf="!isEditMedia('wechat'+ i )" class="ws-media-list col pl-2 m-0 font-9">{{media?.value}}
                            <span (click)="$event.stopPropagation();removeMedia('wechat', media?.value)"
                                class="fas fa-times"></span>
                            <span (click)="$event.stopPropagation();setEditMedia('wechat' + i)"
                                class="fas fa-edit"></span>
                        </p>
                        <form #frm="ngForm" class="input-group fit-width" *ngIf="isEditMedia('wechat' + i)">
                            <input (clickOutside)="setEditMedia('')" id="wechat{{i}}input" name="wechat" type='text'
                                class="pl-2 col form-control form-control-sm no-outline" autocomplete="off"
                                placeholder="URL" [ngModel]="media?.value" />
                            <div class="input-group-append">
                                <button (click)="editMedia('wechat', frm, i)"
                                    class="input-group-text pl-2 pr-2 nooutline">
                                    <span class="fa fa-check"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <div *ngSwitchCase="'weibo'">
                    <div class="w-100 row no-gutters">
                        <label id="weibo" class="ws-icon mr-3 d-inline-block"></label>
                        <p *ngIf="!isEditMedia('weibo'+ i )" class="ws-media-list col pl-2 m-0 font-9">{{media?.value}}
                            <span (click)="$event.stopPropagation(); removeMedia('weibo', media?.value)"
                                class="fas fa-times"></span>
                            <span (click)="$event.stopPropagation(); setEditMedia('weibo' + i)"
                                class="fas fa-edit"></span>
                        </p>
                        <form #frm="ngForm" class="input-group fit-width" *ngIf="isEditMedia('weibo' + i)">
                            <input (clickOutside)="setEditMedia('')" id="weibo{{i}}input" name="weibo" type='text'
                                class="pl-2 col form-control form-control-sm no-outline" autocomplete="off"
                                placeholder="URL" [ngModel]="media?.value" />
                            <div class="input-group-append">
                                <button (click)="editMedia('weibo', frm, i)"
                                    class="input-group-text pl-2 pr-2 nooutline">
                                    <span class="fa fa-check"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-template #loadingTemplate>
    <ng-container *ngIf="loading.isRunning(); else noMedia">
        <ws-loading></ws-loading>
    </ng-container>
</ng-template>

<ng-template #noMedia>
    <h4 class="text-center mt-5 mb-5">No Social Media</h4>
</ng-template>